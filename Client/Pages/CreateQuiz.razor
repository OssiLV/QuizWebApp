@page "/create-quiz"

<PageTitle>Create a New Quiz</PageTitle>
<NavMenu  />
    
<MudContainer Class="mt-4">
    <MudStack Class="pa-2">
        <MudStack Row="true" AlignItems="AlignItems.Center"  >
            <MudText Typo="Typo.h5" Style="font-weight: bolder">Create a new Quiz</MudText>
            <MudStack Row="true" AlignItems="AlignItems.Center">
                <MudToggleIconButton @bind-Toggled="@isFavorite"
                                     Icon="@Icons.Material.Filled.ToggleOff" Color="@Color.Dark" Title="Not favorite" Size="Size.Large"
                                     ToggledIcon="@Icons.Material.Filled.ToggleOn" ToggledColor="@Color.Secondary" ToggledTitle="Favorite" ToggledSize="Size.Large" />
                <MudText>@(isFavorite ? "Favorite 💓" : "Not Favorite")</MudText>
            </MudStack>
            <MudSpacer />
            <MudTooltip Text="Create a new Quiz">
                <MudButton OnClick="HandleAddNewQuizAsync" Variant="Variant.Filled" Color="Color.Secondary">Create</MudButton>
            </MudTooltip>
        </MudStack>
        <MudPaper Elevation="0" Class="py-4">
            <MudTextField T="string" @bind-Value="title" Counter="50" MaxLength="50" Immediate="true" Variant="Variant.Text" HelperText="Title" ErrorText="@errorTitleMessage" Error="@isTitleError" Placeholder="Enter a title, like 'Biology - Chapter 22: Evolution'" InputType="InputType.Text" Style="width: 24rem" />
            <MudTextField T="string" @bind-Value="description" Counter="160" MaxLength="160" Immediate="true" Lines="3" Variant="Variant.Text" HelperText="Description" Placeholder="Add a description..." InputType="InputType.Text" Style="width: 24rem" />
		</MudPaper>
    </MudStack>

    <MudGrid Class="pa-2" >
        @foreach(var item in frameQuestions)
        {
            <MudItem xs="12">
                <MudPaper Elevation="0">
                    <MudStack Row="true">
                        <MudText>@item.Id</MudText>
                        <MudSpacer />
                        <MudTooltip Text="Delete Question" Color="Color.Secondary" ShowOnHover="true">
                            <MudIconButton Disabled="isTwoQuestion" @onclick="@(() => DeleteQuestion(item.Id))" Icon="@Icons.Material.Filled.Delete" Class="cursor-pointer" />
                        </MudTooltip>
                    </MudStack>
                    <MudStack Row="true" Spacing="6">
                        <MudTextField @bind-Value="item.QuestionCreateRequest.Content" ErrorText="@errorQuestionMessage" Error="@isQuestionError" Immediate="true" Counter="80" MaxLength="80" Class="pa-0" />
                        <MudDivider Vertical="true" FlexItem="true" />
                        <MudTextField @bind-Value="item.QuestionCreateRequest.Answer" ErrorText="@errorQuestionMessage" Error="@isQuestionError" Immediate="true" Counter="80" MaxLength="80" Class="pa-0" />
                    </MudStack>
                </MudPaper>
            </MudItem>
        }
        
    </MudGrid>
    <MudDivider Class="mt-6"/>
	<MudButton OnClick="AddNewQuestion" FullWidth Class="pa-2 mt-4" Variant="Variant.Filled" Color="Color.Primary">New Question</MudButton>
</MudContainer>
